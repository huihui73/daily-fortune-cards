# TODO - 每日推算卡项目

## Phase 1: MVP 核心功能

- [x] 小程序项目初始化 + 云开发环境搭建
  - [x] 项目结构创建
  - [x] 基础文件创建（app.js, app.json, app.wxss）
  - [x] CardCard 组件开发
  - [x] 首页 UI 框架

- [x] FortuneEngine 核心算法实现
  - [x] 周易卦象生成（64卦）
  - [x] 五行平衡计算
  - [x] 生命路径数计算
  - [x] 幸运色、幸运数字生成
  - [x] 卦象解读库
  - [x] 穿衣建议生成
  - [x] 饮食建议生成
  - [x] 每日任务生成
  - [x] 日记 prompts 生成

- [x] 云函数开发
  - [x] login 云函数
  - [x] decryptPhone 云函数
  - [x] getUserData 云函数（框架）

- [ ] 首页 UI + 8张基础卡片展示
  - [x] 卡片渲染
  - [x] 卡片展开/收起
  - [ ] 卡片复制功能
  - [ ] 卡片分享功能

- [ ] 登录/手机号授权流程完整打通
  - [x] 微信登录流程
  - [x] 手机号授权
  - [ ] 授权失败处理
  - [ ] 授权引导优化

- [x] 本地缓存机制
  - [x] 生日、性别、手机号缓存
  - [x] 推算结果缓存
  - [ ] 缓存过期清理
  - [ ] 跨设备同步（云端）

## Phase 2: 体验优化

- [ ] 卡片可视化增强
  - [ ] 颜色条形图展示五行
  - [ ] 轮盘组件展示幸运数字
  - [ ] 卡片动画效果
  - [ ] 卡片主题切换

- [ ] 微任务打卡功能
  - [ ] 任务勾选
  - [ ] 完成状态保存
  - [ ] 完成统计
  - [ ] 完成动画

- [ ] 日记功能
  - [ ] 日记输入界面
  - [ ] 日记保存到本地
  - [ ] 日记列表查看
  - [ ] 日记导出

- [ ] 每日更新机制
  - [x] 基于日期重新计算
  - [ ] 每日推送提醒
  - [ ] 推算结果历史查看

- [ ] 错误处理与边界情况
  - [ ] 网络错误处理
  - [ ] 云函数超时处理
  - [ ] 空状态优化
  - [ ] 加载状态优化

## Phase 3: 云端能力扩展

- [ ] 云数据库设计
  - [x] 数据库文档
  - [ ] 初始化数据库集合
  - [ ] 数据库权限配置
  - [ ] 数据库索引优化

- [ ] 用户数据持久化
  - [ ] 用户信息保存
  - [ ] 推算历史保存
  - [ ] 日记数据保存
  - [ ] 多设备同步

- [ ] 数据统计
  - [ ] 用户留存统计
  - [ ] 卡片点击率统计
  - [ ] 功能使用频率
  - [ ] 用户画像分析

- [ ] 数据导出/删除
  - [ ] 用户数据导出
  - [ ] 用户数据删除
  - [ ] 隐私政策页面
  - [ ] 用户协议页面

## Phase 4: 内容丰富

- [ ] 扩展64卦完整解读库
  - [ ] 完整卦名
  - [ ] 详细解读
  - [ ] 变爻说明
  - [ ] 历史典故

- [ ] 穿衣模板库
  - [ ] 春季穿搭
  - [ ] 夏季穿搭
  - [ ] 秋季穿搭
  - [ ] 冬季穿搭
  - [ ] 场景化穿搭（通勤、约会、运动等）

- [ ] 饮食模板库
  - [ ] 早餐模板
  - [ ] 午餐模板
  - [ ] 晚餐模板
  - [ ] 加餐建议
  - [ ] 季节食谱

- [ ] 多语言支持
  - [ ] 英文版
  - [ ] 繁体中文版
  - [ ] 语言切换功能

- [ ] 区域化适配
  - [ ] 天气API集成
  - [ ] 区域饮食差异
  - [ ] 区域穿衣差异

## Phase 5: 商业化探索

- [ ] 付费功能
  - [ ] 高级卡片
  - [ ] 深度解读
  - [ ] 历史分析

- [ ] 个性化推荐算法
  - [ ] 基于历史选择
  - [ ] 基于用户反馈
  - [ ] 机器学习优化

- [ ] 社交分享功能
  - [ ] 卡片分享
  - [ ] 分享海报
  - [ ] 社交卡片设计

## 文档

- [x] README.md
- [x] API 文档
- [x] 数据库设计文档
- [x] 部署指南
- [ ] 用户手册
- [ ] 开发者指南
- [ ] 设计规范

## 测试

- [ ] 单元测试
- [ ] 集成测试
- [ ] UI测试
- [ ] 性能测试
- [ ] 安全测试

## 已知问题

1. [ ] 云函数 request-promise-native 需要在云端安装依赖
2. [ ] CardCard 组件需要更多自定义样式
3. [ ] 日记功能尚未实现
4. [ ] 数据库集合需要手动创建

## 待优化

1. [ ] 性能优化（首屏加载速度）
2. [ ] 用户体验优化（交互动画）
3. [ ] 错误提示优化（友好的错误信息）
4. [ ] 无障碍支持（屏幕阅读器）

---

**最后更新**: 2025-01-10
